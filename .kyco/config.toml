[agent.codex]
aliases = [
    "x",
    "cx",
]
sdk = "codex"
session_mode = "oneshot"
system_prompt_mode = "append"

[agent.claude]
aliases = [
    "c",
    "cl",
]
sdk = "claude"
session_mode = "oneshot"
system_prompt_mode = "append"

[mode.review]
target_default = "code"
scope_default = "file"
prompt = "Review the code in `{file}` for issues, bugs, and improvements. {description}"
system_prompt = "You are a code reviewer. Focus on bugs, security issues, performance problems, and code quality. Be thorough but constructive. Do NOT modify any files."
session_mode = "oneshot"
max_turns = 10
disallowed_tools = [
    "Write",
    "Edit",
    "Bash",
]
aliases = [
    "r",
    "rev",
]
output_states = [
    "issues_found",
    "no_issues",
]
allowed_tools = []

[mode.review.claude]
permission_mode = "default"

[mode.review.codex]
sandbox = "read-only"

[mode.chat]
prompt = "{description}"
system_prompt = "You are a helpful assistant for this codebase. You can read and explore the code to answer questions."
session_mode = "session"
max_turns = 0
disallowed_tools = ["Bash(git push)"]
aliases = ["c"]
output_states = []
allowed_tools = []

[mode.chat.claude]
permission_mode = "default"

[mode.chat.codex]
sandbox = "workspace-write"

[mode.implement]
target_default = "code"
scope_default = "file"
prompt = "Implement the following in `{file}`: {description}"
system_prompt = "You are a software engineer. Implement the requested feature or functionality."
session_mode = "oneshot"
max_turns = 50
disallowed_tools = [
    "Bash(git push)",
    "Bash(git push --force)",
]
aliases = [
    "i",
    "impl",
]
output_states = [
    "implemented",
    "blocked",
]
allowed_tools = []

[mode.implement.claude]
permission_mode = "acceptEdits"

[mode.implement.codex]
sandbox = "workspace-write"

[mode.fix]
target_default = "code"
scope_default = "file"
prompt = "Fix the issues in `{file}`. {description}"
system_prompt = "You are a code fixer. Apply the necessary fixes based on the issues identified. Make minimal changes to fix the problems."
session_mode = "oneshot"
max_turns = 30
disallowed_tools = [
    "Bash(git push)",
    "Bash(git push --force)",
]
aliases = ["f"]
output_states = [
    "fixed",
    "unfixable",
]
allowed_tools = []

[mode.fix.claude]
permission_mode = "acceptEdits"

[mode.fix.codex]
sandbox = "workspace-write"

[mode.plan]
target_default = "code"
scope_default = "file"
prompt = "Create a detailed implementation plan for `{file}`. {description}"
system_prompt = "You are in planning mode. Propose a concrete, step-by-step plan with relevant files/functions, risks, and how you would validate the change. Do NOT modify any files or run commands."
session_mode = "oneshot"
max_turns = 15
disallowed_tools = [
    "Write",
    "Edit",
    "Bash",
]
aliases = ["p"]
output_states = [
    "plan_ready",
    "needs_clarification",
]
allowed_tools = []

[mode.plan.claude]
permission_mode = "plan"

[mode.plan.codex]
sandbox = "read-only"

[chain."review+fix"]
description = "Review code and fix any issues found"
stop_on_failure = true

[[chain."review+fix".steps]]
mode = "review"

[[chain."review+fix".steps]]
mode = "fix"
trigger_on = ["issues_found"]
skip_on = ["no_issues"]

[scope]

[target]

[alias.agent]

[alias.mode]

[alias.scope]

[alias.target]

[settings]
max_concurrent_jobs = 4
auto_run = true
use_worktree = false
max_jobs_per_file = 1

[settings.gui]
hotkey = "cmd+option+k"
default_agent = "claude"
default_mode = "implement"
output_schema = """

IMPORTANT: End your response with a structured YAML summary block:
---
title: Short task title (max 60 chars)
commit_subject: Suggested git commit subject (max 72 chars)
commit_body: |
  Suggested git commit body (optional, can be multiline)
details: What was done (2-3 sentences)
status: success|partial|failed
summary: |
  Detailed summary of findings and actions (optional, can be multiline).
  This is passed to the next agent in a chain for context.
state: <state_identifier>
---

STATE VALUES: issues_found, no_issues, fixed, unfixable, tests_pass, tests_fail, implemented, blocked, refactored, documented
"""
structured_output_schema = ""
http_port = 9876
http_token = ""

[settings.gui.voice]
mode = "disabled"
keywords = [
    "refactor",
    "fix",
    "tests",
    "docs",
    "review",
    "optimize",
    "implement",
    "explain",
]
whisper_model = "base"
language = "auto"
silence_threshold = 0.1
silence_duration = 2.5
max_duration = 300.0

[settings.registry]
enabled_adapters = []
disabled_adapters = []
terminal_suffix = "-terminal"

[settings.claude]
allowed_plugin_paths = []
